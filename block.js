const Web3 = require('web3')
const rpcUrl = "http://localhost:8000"
// const Web3Personal = require('web3-shh')
// const shh = new Web3Personal(rpcUrl)
const web3 = new Web3(rpcUrl) 
//const web3 = new Web3(new Web3.providers.HttpProvider(rpcUrl));
var Accounts = require('web3-eth-accounts')
var keyth = require('keythereum')
const Tx = require('ethereumjs-tx').Transaction
const ContractGet = require('./app/models/contract')



//console.log(web3.eth.accounts)

// console.log(Web3.version)


var accountOrpaKey = "63486cf0332b231a768b8cb4e1683f352532a22e37f5c778e61f016f3a314038";

var abi = [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "string",
				"name": "orderId",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "buyer",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "seller",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "fromAdd",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "toAdd",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "role",
				"type": "string"
			}
		],
		"name": "logDrugInfo",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"internalType": "string",
				"name": "productionId",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "secretKey",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "darNumber",
				"type": "string"
			},
			{
				"indexed": false,
				"internalType": "string",
				"name": "role",
				"type": "string"
			}
		],
		"name": "logQRCodeInfo",
		"type": "event"
	},
	{
		"inputs": [],
		"name": "buyer",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_productionId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_secretKey",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_darNumber",
				"type": "string"
			}
		],
		"name": "createQR",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getOrderDAR",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getOrderInfo",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getOrderStatusInfo",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_productionId",
				"type": "string"
			}
		],
		"name": "getQRInfo",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_orderId",
				"type": "string"
			}
		],
		"name": "getStoreDrugs",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "isBuyer_",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "isSeller_",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "seller",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_orderId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_productionIdNums",
				"type": "string"
			}
		],
		"name": "setOrderDAR",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_orderId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_status",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_email",
				"type": "string"
			}
		],
		"name": "setOrderInfo",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_orderId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_status",
				"type": "string"
			}
		],
		"name": "setOrderStatusInfo",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_orderId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_buyer",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_seller",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_fromAdd",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_toAdd",
				"type": "string"
			}
		],
		"name": "storeDrugs",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_orderId",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_buyer",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_seller",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_fromAdd",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_toAdd",
				"type": "string"
			}
		],
		"name": "storeDrugsAgain",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	}
];

var bytecode = "0x" + "608060405234801561001057600080fd5b5033600660006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555061255a806100616000396000f3fe608060405234801561001057600080fd5b50600436106100f55760003560e01c8063622a072911610097578063b21847a011610066578063b21847a01461026e578063cc728f1f1461028a578063f108067e146102a6578063f2b0597c146102c2576100f5565b8063622a0729146101e45780637150d8ae146102165780637c74d4f3146102345780639755963e14610252576100f5565b806313e62883116100d357806313e628831461015757806323d777341461017557806357c2eb05146101a95780635def9740146101c5576100f5565b806301705ed5146100fa57806301efb6c81461011957806308551a5314610139575b600080fd5b6101026102de565b604051610110929190611f49565b60405180910390f35b610121610405565b60405161013093929190611f80565b60405180910390f35b6101416105bf565b60405161014e9190611f13565b60405180910390f35b61015f6105e5565b60405161016c9190611f2e565b60405180910390f35b61018f600480360381019061018a9190611b6f565b61063d565b6040516101a0959493929190611fcc565b60405180910390f35b6101c360048036038101906101be9190611bb0565b6109b9565b005b6101cd610a7b565b6040516101db929190611f49565b60405180910390f35b6101fe60048036038101906101f99190611b6f565b610ba2565b60405161020d93929190611f80565b60405180910390f35b61021e610dbb565b60405161022b9190611f13565b60405180910390f35b61023c610de1565b6040516102499190611f2e565b60405180910390f35b61026c60048036038101906102679190611cb3565b610e39565b005b61028860048036038101906102839190611c1c565b6111e4565b005b6102a4600480360381019061029f9190611cb3565b61151d565b005b6102c060048036038101906102bb9190611bb0565b6118c8565b005b6102dc60048036038101906102d79190611c1c565b61198a565b005b606080600160038180546102f190612310565b80601f016020809104026020016040519081016040528092919081815260200182805461031d90612310565b801561036a5780601f1061033f5761010080835404028352916020019161036a565b820191906000526020600020905b81548152906001019060200180831161034d57829003601f168201915b5050505050915080805461037d90612310565b80601f01602080910402602001604051908101604052809291908181526020018280546103a990612310565b80156103f65780601f106103cb576101008083540402835291602001916103f6565b820191906000526020600020905b8154815290600101906020018083116103d957829003601f168201915b50505050509050915091509091565b606080606060016002600082805461041c90612310565b80601f016020809104026020016040519081016040528092919081815260200182805461044890612310565b80156104955780601f1061046a57610100808354040283529160200191610495565b820191906000526020600020905b81548152906001019060200180831161047857829003601f168201915b505050505092508180546104a890612310565b80601f01602080910402602001604051908101604052809291908181526020018280546104d490612310565b80156105215780601f106104f657610100808354040283529160200191610521565b820191906000526020600020905b81548152906001019060200180831161050457829003601f168201915b5050505050915080805461053490612310565b80601f016020809104026020016040519081016040528092919081815260200182805461056090612310565b80156105ad5780601f10610582576101008083540402835291602001916105ad565b820191906000526020600020905b81548152906001019060200180831161059057829003601f168201915b50505050509050925092509250909192565b600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b60608060608060606004866040516106559190611efc565b90815260200160405180910390206000016004876040516106769190611efc565b90815260200160405180910390206001016004886040516106979190611efc565b90815260200160405180910390206002016004896040516106b89190611efc565b908152602001604051809103902060030160048a6040516106d99190611efc565b90815260200160405180910390206004018480546106f690612310565b80601f016020809104026020016040519081016040528092919081815260200182805461072290612310565b801561076f5780601f106107445761010080835404028352916020019161076f565b820191906000526020600020905b81548152906001019060200180831161075257829003601f168201915b5050505050945083805461078290612310565b80601f01602080910402602001604051908101604052809291908181526020018280546107ae90612310565b80156107fb5780601f106107d0576101008083540402835291602001916107fb565b820191906000526020600020905b8154815290600101906020018083116107de57829003601f168201915b5050505050935082805461080e90612310565b80601f016020809104026020016040519081016040528092919081815260200182805461083a90612310565b80156108875780601f1061085c57610100808354040283529160200191610887565b820191906000526020600020905b81548152906001019060200180831161086a57829003601f168201915b5050505050925081805461089a90612310565b80601f01602080910402602001604051908101604052809291908181526020018280546108c690612310565b80156109135780601f106108e857610100808354040283529160200191610913565b820191906000526020600020905b8154815290600101906020018083116108f657829003601f168201915b5050505050915080805461092690612310565b80601f016020809104026020016040519081016040528092919081815260200182805461095290612310565b801561099f5780601f106109745761010080835404028352916020019161099f565b820191906000526020600020905b81548152906001019060200180831161098257829003601f168201915b505050505090509450945094509450945091939590929450565b3373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610a49576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a40906121f3565b60405180910390fd5b8160019080519060200190610a5f929190611a64565b508060039080519060200190610a76929190611a64565b505050565b60608060016002818054610a8e90612310565b80601f0160208091040260200160405190810160405280929190818152602001828054610aba90612310565b8015610b075780601f10610adc57610100808354040283529160200191610b07565b820191906000526020600020905b815481529060010190602001808311610aea57829003601f168201915b50505050509150808054610b1a90612310565b80601f0160208091040260200160405190810160405280929190818152602001828054610b4690612310565b8015610b935780601f10610b6857610100808354040283529160200191610b93565b820191906000526020600020905b815481529060010190602001808311610b7657829003601f168201915b50505050509050915091509091565b6060806060600584604051610bb79190611efc565b9081526020016040518091039020600001600585604051610bd89190611efc565b9081526020016040518091039020600101600586604051610bf99190611efc565b9081526020016040518091039020600201828054610c1690612310565b80601f0160208091040260200160405190810160405280929190818152602001828054610c4290612310565b8015610c8f5780601f10610c6457610100808354040283529160200191610c8f565b820191906000526020600020905b815481529060010190602001808311610c7257829003601f168201915b50505050509250818054610ca290612310565b80601f0160208091040260200160405190810160405280929190818152602001828054610cce90612310565b8015610d1b5780601f10610cf057610100808354040283529160200191610d1b565b820191906000526020600020905b815481529060010190602001808311610cfe57829003601f168201915b50505050509150808054610d2e90612310565b80601f0160208091040260200160405190810160405280929190818152602001828054610d5a90612310565b8015610da75780601f10610d7c57610100808354040283529160200191610da7565b820191906000526020600020905b815481529060010190602001808311610d8a57829003601f168201915b505050505090509250925092509193909250565b600760009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b3373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610ec9576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610ec0906121f3565b60405180910390fd5b8460016002811115610f04577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b600482604051610f149190611efc565b908152602001604051809103902060050160009054906101000a900460ff166002811115610f6b577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415610fac576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610fa3906121b3565b60405180910390fd5b85600280811115610fe6577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b600482604051610ff69190611efc565b908152602001604051809103902060050160009054906101000a900460ff16600281111561104d577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b141561108e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611085906121d3565b60405180910390fd5b8660048860405161109f9190611efc565b908152602001604051809103902060000190805190602001906110c3929190611a64565b50856004886040516110d59190611efc565b908152602001604051809103902060010190805190602001906110f9929190611a64565b508460048860405161110b9190611efc565b9081526020016040518091039020600201908051906020019061112f929190611a64565b50836004886040516111419190611efc565b90815260200160405180910390206003019080519060200190611165929190611a64565b50826004886040516111779190611efc565b9081526020016040518091039020600401908051906020019061119b929190611a64565b507fca01b822d94f4b3dfa45d841ecfe8823af53b351e054ec8aace6ce43ad80b7ef87878787876040516111d3959493929190612042565b60405180910390a150505050505050565b3373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611274576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161126b906121f3565b60405180910390fd5b82600160028111156112af577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6005826040516112bf9190611efc565b908152602001604051809103902060030160009054906101000a900460ff166002811115611316577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415611357576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161134e906121b3565b60405180910390fd5b83600280811115611391577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6005826040516113a19190611efc565b908152602001604051809103902060030160009054906101000a900460ff1660028111156113f8577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415611439576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611430906121d3565b60405180910390fd5b8460058660405161144a9190611efc565b9081526020016040518091039020600001908051906020019061146e929190611a64565b50836005866040516114809190611efc565b908152602001604051809103902060010190805190602001906114a4929190611a64565b50826005866040516114b69190611efc565b908152602001604051809103902060020190805190602001906114da929190611a64565b507fa53143509aa93494d734a0869ba24f59543e43a9685b510eff2b10cd7ea085d885858560405161150e93929190612154565b60405180910390a15050505050565b3373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146115ad576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115a4906121f3565b60405180910390fd5b84600160028111156115e8577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6004826040516115f89190611efc565b908152602001604051809103902060050160009054906101000a900460ff16600281111561164f577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415611690576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611687906121b3565b60405180910390fd5b856002808111156116ca577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b6004826040516116da9190611efc565b908152602001604051809103902060050160009054906101000a900460ff166002811115611731577f4e487b7100000000000000000000000000000000000000000000000000000000600052602160045260246000fd5b1415611772576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611769906121d3565b60405180910390fd5b866004886040516117839190611efc565b908152602001604051809103902060000190805190602001906117a7929190611a64565b50856004886040516117b99190611efc565b908152602001604051809103902060010190805190602001906117dd929190611a64565b50846004886040516117ef9190611efc565b90815260200160405180910390206002019080519060200190611813929190611a64565b50836004886040516118259190611efc565b90815260200160405180910390206003019080519060200190611849929190611a64565b508260048860405161185b9190611efc565b9081526020016040518091039020600401908051906020019061187f929190611a64565b507fca01b822d94f4b3dfa45d841ecfe8823af53b351e054ec8aace6ce43ad80b7ef87878787876040516118b79594939291906120cb565b60405180910390a150505050505050565b3373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611958576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161194f906121f3565b60405180910390fd5b816001908051906020019061196e929190611a64565b508060029080519060200190611985929190611a64565b505050565b3373ffffffffffffffffffffffffffffffffffffffff16600660009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614611a1a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a11906121f3565b60405180910390fd5b8260019080519060200190611a30929190611a64565b508160029080519060200190611a47929190611a64565b508060009080519060200190611a5e929190611a64565b50505050565b828054611a7090612310565b90600052602060002090601f016020900481019282611a925760008555611ad9565b82601f10611aab57805160ff1916838001178555611ad9565b82800160010185558215611ad9579182015b82811115611ad8578251825591602001919060010190611abd565b5b509050611ae69190611aea565b5090565b5b80821115611b03576000816000905550600101611aeb565b5090565b6000611b1a611b1584612238565b612213565b905082815260208101848484011115611b3257600080fd5b611b3d8482856122ce565b509392505050565b600082601f830112611b5657600080fd5b8135611b66848260208601611b07565b91505092915050565b600060208284031215611b8157600080fd5b600082013567ffffffffffffffff811115611b9b57600080fd5b611ba784828501611b45565b91505092915050565b60008060408385031215611bc357600080fd5b600083013567ffffffffffffffff811115611bdd57600080fd5b611be985828601611b45565b925050602083013567ffffffffffffffff811115611c0657600080fd5b611c1285828601611b45565b9150509250929050565b600080600060608486031215611c3157600080fd5b600084013567ffffffffffffffff811115611c4b57600080fd5b611c5786828701611b45565b935050602084013567ffffffffffffffff811115611c7457600080fd5b611c8086828701611b45565b925050604084013567ffffffffffffffff811115611c9d57600080fd5b611ca986828701611b45565b9150509250925092565b600080600080600060a08688031215611ccb57600080fd5b600086013567ffffffffffffffff811115611ce557600080fd5b611cf188828901611b45565b955050602086013567ffffffffffffffff811115611d0e57600080fd5b611d1a88828901611b45565b945050604086013567ffffffffffffffff811115611d3757600080fd5b611d4388828901611b45565b935050606086013567ffffffffffffffff811115611d6057600080fd5b611d6c88828901611b45565b925050608086013567ffffffffffffffff811115611d8957600080fd5b611d9588828901611b45565b9150509295509295909350565b611dab81612290565b82525050565b611dba816122a2565b82525050565b6000611dcb82612269565b611dd58185612274565b9350611de58185602086016122dd565b611dee816123d1565b840191505092915050565b6000611e0482612269565b611e0e8185612285565b9350611e1e8185602086016122dd565b80840191505092915050565b6000611e37602983612274565b9150611e42826123e2565b604082019050919050565b6000611e5a600f83612274565b9150611e6582612431565b602082019050919050565b6000611e7d600a83612274565b9150611e888261245a565b602082019050919050565b6000611ea0602683612274565b9150611eab82612483565b604082019050919050565b6000611ec3600c83612274565b9150611ece826124d2565b602082019050919050565b6000611ee6601983612274565b9150611ef1826124fb565b602082019050919050565b6000611f088284611df9565b915081905092915050565b6000602082019050611f286000830184611da2565b92915050565b6000602082019050611f436000830184611db1565b92915050565b60006040820190508181036000830152611f638185611dc0565b90508181036020830152611f778184611dc0565b90509392505050565b60006060820190508181036000830152611f9a8186611dc0565b90508181036020830152611fae8185611dc0565b90508181036040830152611fc28184611dc0565b9050949350505050565b600060a0820190508181036000830152611fe68188611dc0565b90508181036020830152611ffa8187611dc0565b9050818103604083015261200e8186611dc0565b905081810360608301526120228185611dc0565b905081810360808301526120368184611dc0565b90509695505050505050565b600060c082019050818103600083015261205c8188611dc0565b905081810360208301526120708187611dc0565b905081810360408301526120848186611dc0565b905081810360608301526120988185611dc0565b905081810360808301526120ac8184611dc0565b905081810360a08301526120bf81611e4d565b90509695505050505050565b600060c08201905081810360008301526120e58188611dc0565b905081810360208301526120f98187611dc0565b9050818103604083015261210d8186611dc0565b905081810360608301526121218185611dc0565b905081810360808301526121358184611dc0565b905081810360a083015261214881611e70565b90509695505050505050565b6000608082019050818103600083015261216e8186611dc0565b905081810360208301526121828185611dc0565b905081810360408301526121968184611dc0565b905081810360608301526121a981611eb6565b9050949350505050565b600060208201905081810360008301526121cc81611e2a565b9050919050565b600060208201905081810360008301526121ec81611e93565b9050919050565b6000602082019050818103600083015261220c81611ed9565b9050919050565b600061221d61222e565b90506122298282612342565b919050565b6000604051905090565b600067ffffffffffffffff821115612253576122526123a2565b5b61225c826123d1565b9050602081019050919050565b600081519050919050565b600082825260208201905092915050565b600081905092915050565b600061229b826122ae565b9050919050565b60008115159050919050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b82818337600083830152505050565b60005b838110156122fb5780820151818401526020810190506122e0565b8381111561230a576000848401525b50505050565b6000600282049050600182168061232857607f821691505b6020821081141561233c5761233b612373565b5b50919050565b61234b826123d1565b810181811067ffffffffffffffff8211171561236a576123696123a2565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b6000601f19601f8301169050919050565b7f536f6d657468696e672069732057726f6e672066726f6d204465706f74496e6360008201527f6861726765203a28200000000000000000000000000000000000000000000000602082015250565b7f4465706f7420496e2d6368617267650000000000000000000000000000000000600082015250565b7f506861726d616369737400000000000000000000000000000000000000000000600082015250565b7f536f6d657468696e672069732057726f6e672066726f6d20506861726d61636960008201527f7374203a28200000000000000000000000000000000000000000000000000000602082015250565b7f4d616e7566616374757265720000000000000000000000000000000000000000600082015250565b7f4d6573736167652066726f6d204d616e7566616374757265720000000000000060008201525056fea2646970667358221220f17209bba96ac3ab91df97b47b2d5e7fc0343edbe0ca2bb333547afd11397ee264736f6c63430008030033";
	
	
	

//  console.log("Success");
function deployContract(){

	web3.eth.getAccounts().then(async function (accounts){
		// if(err =>{
		// 	console.log(err)
		// })
		var drugContract = new web3.eth.Contract(abi);
		//console.log(drugContract)

		var deployData = await drugContract.deploy({
			data: bytecode
		}).encodeABI();

		const tx={
			chainId: 23112,
			data: deployData,
			gas:8000000
		}
		
		var BaseAccount = keyth.recover('new1',keyth.importFromFile(accounts[0], "./block/data/")).toString('hex')

		web3.eth.accounts.signTransaction(tx, "0x"+ accountOrpaKey).then(signed =>{
			web3.eth.sendSignedTransaction(signed.rawTransaction).on('receipt', async function(response){
				// console.log(response)

				
				const newContract = new ContractGet({
					blockHash: response.blockHash,
					blockNumber: response.blockNumber,
					contractAddress: response.contractAddress,
					cumulativeGasUsed: response.cumulativeGasUsed,
					from: response.from,
					gasUsed: response.gasUsed,
					logsBloom: response.logsBloom,
					status: response.status,
					to: response.to,
					transactionHash: response.transactionHash,
					transactionIndex: response.transactionIndex,
					type: response.type
				})

				const conSave = await newContract.save();
				console.log(conSave)
			 
			})
			
		})
		//console.log(deployData)
	})



 }


module.exports = deployContract